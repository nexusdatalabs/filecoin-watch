---
layout: "../layouts/Layout.astro"
---

import clientsCsv from "../data/clients.csv?raw";
import { parse } from 'csv-parse/sync';

export const clients = (() => {
  const rows = parse(clientsCsv, {
    columns: true,
    skip_empty_lines: true,
    relax_column_count: true,
  });
  rows.sort((a, b) => {
    const an = (a.client_name || a.client_id || '').toLowerCase();
    const bn = (b.client_name || b.client_id || '').toLowerCase();
    if (an < bn) return -1;
    if (an > bn) return 1;
    return 0;
  });
  return rows;
})();

<header class="site-header">
  <a href={import.meta.env.BASE_URL} aria-label="Filecoin Watch home">
    <img
      src={import.meta.env.BASE_URL + 'favicon.svg'}
      alt="Filecoin Watch"
      width="56"
      height="56"
      decoding="async"
      loading="eager"
      fetchpriority="high"
    />
  </a>
  # Clients

  <p class="subhead">All clients from the dataset</p>
</header>

<table class="clients">
  <thead>
    <tr>
      <th>Client</th>
      <th>Organization</th>
      <th>Region</th>
      <th>Industry</th>
      <th>Total deals</th>
    </tr>
  </thead>
  <tbody>
    {clients.map((c) => (
      <tr>
        <td>
          <a href={import.meta.env.BASE_URL + `client/${c.client_id}/`}>{c.client_name || c.client_id}</a>
          <div class="muted">{c.client_id}</div>
        </td>
        <td>{c.organization_name || '—'}</td>
        <td>{c.region || '—'}</td>
        <td>{c.industry || '—'}</td>
        <td class="num">{c.total_deals || '0'}</td>
      </tr>
    ))}
  </tbody>
  </table>

{/* styling intentionally omitted to avoid MDX style parsing issues */}
