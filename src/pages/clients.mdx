---
layout: "../layouts/Layout.astro"
---

import clientsCsv from "../data/clients.csv?raw";
import { parse } from 'csv-parse/sync';
import ClientsTable from "../components/ClientsTable.astro";

export const clients = (() => {
  const rows = parse(clientsCsv, {
    columns: true,
    skip_empty_lines: true,
    relax_column_count: true,
  });
  // Default sort: total deals (numeric) descending
  rows.sort((a, b) => (Number(b.total_deals || 0) - Number(a.total_deals || 0)));
  return rows;
})();

<header class="site-header">
  <a href={import.meta.env.BASE_URL} aria-label="Filecoin Watch home">
    <img
      src={import.meta.env.BASE_URL + 'favicon.svg'}
      alt="Filecoin Watch"
      width="56"
      height="56"
      decoding="async"
      loading="eager"
      fetchpriority="high"
    />
  </a>
  # Clients

  <p class="subhead">All clients from the dataset</p>
</header>

<ClientsTable rows={clients} pageSize={50} baseUrl={import.meta.env.BASE_URL} />

{/* Table styles live in global stylesheet */}
